<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>How npm2 Works | How npm Works</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
        <link rel="stylesheet" href="../styles/website.css">
    

        
    
    
    <link rel="next" href="../npm3/index.html" />
    
    
    <link rel="prev" href="../npm2/index.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="2.1"
        data-chapter-title="How npm2 Works"
        data-filepath="npm2/how-npm2-works.md"
        data-basepath=".."
        data-revision="Mon May 02 2016 15:05:30 GMT+0000 (UTC)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="theory-and-design/index.html">
            
                
                    <a href="../theory-and-design/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Theory and Design
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="theory-and-design/what-is-a-package.html">
            
                
                    <a href="../theory-and-design/what-is-a-package.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        What is a package?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="theory-and-design/file-and-directory-names.html">
            
                
                    <a href="../theory-and-design/file-and-directory-names.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        File and Directory Names
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="theory-and-design/dependency-hell.html">
            
                
                    <a href="../theory-and-design/dependency-hell.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Dependency Hell
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="theory-and-design/the-node-module-loader.html">
            
                
                    <a href="../theory-and-design/the-node-module-loader.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        The Node Module Loader
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="npm2/index.html">
            
                
                    <a href="../npm2/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        npm2
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="2.1" data-path="npm2/how-npm2-works.html">
            
                
                    <a href="../npm2/how-npm2-works.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        How npm2 Works
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="npm3/index.html">
            
                
                    <a href="../npm3/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        npm3
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="npm3/how-npm3-works.html">
            
                
                    <a href="../npm3/how-npm3-works.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        How npm3 Works
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="npm3/duplication.html">
            
                
                    <a href="../npm3/duplication.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        npm3 Duplication
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="npm3/non-determinism.html">
            
                
                    <a href="../npm3/non-determinism.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        npm3 Non-Determinism
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >How npm Works</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="how-npm2-works">How npm2 Works</h1>
<p>Imagine there are three modules: A, B, and C. A requires
B at v1.0, and C also requires B, but at v2.0. We can
visualize this like so:</p>
<p><img src="../gitbook/images/deps1.png" alt="2 modules need B"></p>
<p>Now, let&apos;s create an application that requires both module
A and module C.</p>
<p><img src="../gitbook/images/deps2.png" alt="My app needs both A and C"></p>
<h2 id="dependency-hell">Dependency Hell</h2>
<p>A package manager would need to provide a version of
module B. In all other runtimes prior to Node.js, this is
what a package manager would try to do. This is dependency hell:</p>
<p><img src="../gitbook/images/deps3.png" alt="Dependency Hell"></p>
<p>Instead of attempting to resolve module B to a single version,
npm puts both versions of module B into the tree, each version
nested under the module that requires it.</p>
<p><img src="../gitbook/images/deps4.png" alt="what npm does"></p>
<p>In the terminal, this looks like this:</p>
<p><img src="../gitbook/images/tree.png" alt="tree"></p>
<p>You can list the dependencies and still see their relationships using
<code>npm ls</code>:</p>
<p><img src="../gitbook/images/npmls.png" alt="npmls"></p>
<p>If you want to just see your primary dependencies, you can use:</p>
<pre><code>npm ls --depth=0
</code></pre><p><img src="../gitbook/images/npmlsdepth0.png" alt="npmlsdepth0"></p>
<h2 id="npm-and-the-nodejs-module-loader">npm and the Node.js Module Loader</h2>
<p>However, npm doing this is <em>not enough</em>. Despite the fact that
their nested locations allow for the coexistence of two versions
of the same module, most module loaders are unable to load two
different versions of the same module into memory. Luckily, the
Node.js module loader is written for exactly this situation, and
can easily load both versions of the module in a way that they do
not conflict with each other.</p>
<p>How is it that npm and the node module loader are so wonderfully 
symbiotic? They were both written in large part by the same person,
npm, Inc. CEO, Isaac Z. Schlueter. Like 2 sides of the same piece of 
paper, npm and the Node.js module loader are what make Node.js
a uniquely well-suited runtime for dependency management.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../npm2/index.html" class="navigation navigation-prev " aria-label="Previous page: npm2"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../npm3/index.html" class="navigation navigation-next " aria-label="Next page: npm3"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
